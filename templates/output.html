{%  extends "layout.html" %}

{%  block title %}
    Analysis!
{%  endblock %}

{% block header %}
    <h1>Here's your player analysis:</h1>
{% endblock %}

{% block bodytext %}
    <img class="img-fluid" alt="Graph of average(s)" src="{{ graph }}"/>
    <div class="container">
        <div class="row align-items-center mt-5">
            <div class="col-sm-5">
                <h3 style="font-weight: bold">Quick Stats:</h3>
            </div>
            <div class="col">
                <h5>Matches played: {{ matches }}</h5>
            </div>
            {% if which in ['Batting', 'Both'] %}
                <div class="col">
                    <h5>Batting average: {{ batavg }}</h5>
                </div>
            {% endif %}
            {% if which in ['Bowling', 'Both'] %}
                <div class="col">
                    <h5>Bowling average: {{ bowlavg }}</h5>
                </div>
            {% endif %}
        </div>
        <div class="row justify-content-between mt-5">
            <div class="col">
                    <h3 style="font-weight: bold">Career Summary:</h3>
            </div>
            <div class="col">
                <a href="/">
                    <button class="btn btn-danger" type="button">Analyse again</button>
                </a>
            </div>
        </div>
    </div>

    <style>
        @media screen and (min-width: 601px) {
          tr.textchange {
            font-size: 18px;
          }
        }

        @media screen and (max-width: 600px) {
          tr.textchange {
            font-size: 11px;
          }
        }
    </style>

    {% if which != 'Both' %}
    <table class="table table-hover table-sm mt-2">
        <tr class="textchange">
            <th>Innings</th>
            <th>Date</th>
            <th>Versus</th>
            <th>Ground</th>
            {% if which in ['Batting'] %}
                <th>Runs Scored</th>
            {% endif %}
            {% if which in ['Bowling'] %}
                <th>Bowling Figs (w/r)</th>
            {% endif %}
        </tr>
        {% if which == 'Batting' %}
            {% for i in range(1, batmatchstats|length) %}
            <tr class="textchange">
                <td>{{ batmatchstats[i][0] }}</td>
                <td>{{ batmatchstats[i][1] }}</td>
                <td>{{ batmatchstats[i][2] }}</td>
                <td>{{ batmatchstats[i][3] }}</td>
                <td>{{ batmatchstats[i][4] }}</td>
            {% endfor %}

        {% elif which == 'Bowling'  %}
            {% for i in range(1, bowlmatchstats|length) %}
            <tr class="textchange">
                <td>{{ bowlmatchstats[i][0] }}</td>
                <td>{{ bowlmatchstats[i][1] }}</td>
                <td>{{ bowlmatchstats[i][2] }}</td>
                <td>{{ bowlmatchstats[i][3] }}</td>
                <td>{{ bowlmatchstats[i][5] }} / {{ bowlmatchstats[i][4] }}</td>
            {% endfor %}
        {% endif %}
    </table>
    {% else %}
    {% for format in ['Batting', 'Bowling'] %}

        <table class="table table-hover table-sm mt-2">
        <tr class="textchange">
            <th>{{ format }} Innings</th>
            <th>Date</th>
            <th>Versus</th>
            <th>Ground</th>
            {% if format in ['Batting'] %}
                <th>Runs Scored</th>
            {% elif format in ['Bowling'] %}
                <th>Bowling Figs (w/r)</th>
            {% endif %}
        </tr>
        {% if format == 'Batting' %}
            {% for i in range(1, batmatchstats|length) %}
            <tr class="textchange">
                <td>{{ batmatchstats[i][0] }}</td>
                <td>{{ batmatchstats[i][1] }}</td>
                <td>{{ batmatchstats[i][2] }}</td>
                <td>{{ batmatchstats[i][3] }}</td>
                <td>{{ batmatchstats[i][4] }}</td>
            {% endfor %}

        {% elif format == 'Bowling'  %}
            {% for i in range(1, bowlmatchstats|length) %}
            <tr class="textchange">
                <td>{{ bowlmatchstats[i][0] }}</td>
                <td>{{ bowlmatchstats[i][1] }}</td>
                <td>{{ bowlmatchstats[i][2] }}</td>
                <td>{{ bowlmatchstats[i][3] }}</td>
                <td>{{ bowlmatchstats[i][5] }} / {{ bowlmatchstats[i][4] }}</td>
            {% endfor %}
        {% endif %}
    </table>
    {% endfor %}
    {% endif %}

{% endblock %}