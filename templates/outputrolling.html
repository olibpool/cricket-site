{%  extends "layout.html" %}

{%  block title %}
    Rolling Averages!
{%  endblock %}

{% block header %}
    <h1>Here's your player rolling average analysis:</h1>
{% endblock %}

{% block bodytext %}
    <img class="img-fluid" alt="Graph of average(s)" src="{{ graph }}"/>
    <div class="container">
        <div class="row align-items-center mt-5">
            <div class="col-sm-5">
                <h3 style="font-weight: bold">Quick Stats:</h3>
            </div>
            <div class="col">
                <h5>Matches played: {{ batmatchstats[-1][0] }}</h5>
            </div>
            {% if which in ['Batting', 'Both'] %}
                <div class="col">
                    <h5>Current overall batting average: {{ batavg }}</h5>
                </div>
            {% endif %}
            {% if which in ['Bowling', 'Both'] %}
                <div class="col">
                    <h5>Current overall bowling average: {{ bowlavg }}</h5>
                </div>
            {% endif %}
        </div>
        <div class="row justify-content-between mt-5">
            <div class="col">
                    <h3 style="font-weight: bold">Career Summary:</h3>
            </div>
            <div class="col">
                <a href="/">
                    <button class="btn btn-danger" type="button">Analyse again</button>
                </a>
            </div>
        </div>
    </div>

    <table class="table table-hover table-sm mt-2">
        <tr>
            <th>Match</th>
            <th>Date</th>
            <th>Opposition</th>
            <th>Ground</th>
            {% if which in ['Batting', 'Both'] %}
                <th>Runs Scored</th>
            {% endif %}
            {% if which in ['Bowling', 'Both'] %}
                <th>Wickets</th>
                <th>Runs Conceded</th>
            {% endif %}
        </tr>
        {% for i in range(1, batmatchstats|length) %}
        <tr>
            <td>{{ batmatchstats[i][0] }}</td>
            <td>{{ batmatchstats[i][1] }}</td>
            <td>{{ batmatchstats[i][2] }}</td>
            <td>{{ batmatchstats[i][3] }}</td>
            {% if which in ['Batting', 'Both'] %}
                <td>{{ batmatchstats[i][4] }}</td>
            {%  endif %}
            {% if which in ['Bowling', 'Both'] %}
                <td>{{ bowlmatchstats[i][5] }}</td>
                <td>{{ bowlmatchstats[i][4] }}</td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>

{%  endblock %}